# ๐ ะะฟัะธะผะธะทะฐัะธั ะบะพัะทะธะฝ - ะะพะบัะผะตะฝัะฐัะธั

## ๐ ะะฑะทะพั

ะะฐะฝะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ะพะฟะธััะฒะฐะตั ะพะฟัะธะผะธะทะฐัะธะธ, ะฒะฝะตะดัะตะฝะฝัะต ะดะปั ัะปัััะตะฝะธั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ัะธััะตะผั ะบะพัะทะธะฝ ะฟัะธ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะธ.

## ๐ ะะพะฑะฐะฒะปะตะฝะฝัะต ะธะฝะดะตะบัั

### ะะฝะดะตะบัั ะดะปั ะผะพะดะตะปะธ Order:
- `(user, status)` - ะดะปั ะฑััััะพะณะพ ะฟะพะธัะบะฐ ะบะพัะทะธะฝั ะฟะพะปัะทะพะฒะฐัะตะปั
- `(status, created_at)` - ะดะปั ะพัะธััะบะธ ััะฐััั ะบะพัะทะธะฝ
- `(user, status, created_at)` - ะบะพะผะฟะพะทะธัะฝัะน ะธะฝะดะตะบั ะดะปั ัะปะพะถะฝัั ะทะฐะฟัะพัะพะฒ

### ะะฝะดะตะบัั ะดะปั ะผะพะดะตะปะธ OrderItem:
- `(order, product)` - ะดะปั ะฟะพะธัะบะฐ ัะพะฒะฐัะพะฒ ะฒ ะทะฐะบะฐะทะต
- `(order)` - ะดะปั ะฟะพะปััะตะฝะธั ะฒัะตั ัะพะฒะฐัะพะฒ ะทะฐะบะฐะทะฐ

## ๐งน ะะพะผะฐะฝะดั ะพัะธััะบะธ ะบะพัะทะธะฝ

### 1. ะัะพัะผะพัั ััะฐัะธััะธะบะธ ะบะพัะทะธะฝ
```bash
python manage.py cart_stats
```

**ะะฟัะธะธ:**
- `--days 30` - ะบะพะปะธัะตััะฒะพ ะดะฝะตะน ะดะปั ะฐะฝะฐะปะธะทะฐ (ะฟะพ ัะผะพะปัะฐะฝะธั: 30)
- `--notify` - ะพัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธะต ะฐะดะผะธะฝะธัััะฐัะพัั ะตัะปะธ ััะตะฑัะตััั ะพัะธััะบะฐ

**ะัะธะผะตั ะฒัะฒะพะดะฐ:**
```
๐ ะกะขะะขะะกะขะะะ ะะะะะะ ะ ะะะะะะะ (ะทะฐ ะฟะพัะปะตะดะฝะธะต 30 ะดะฝะตะน)
============================================================

๐ ะะะฉะะฏ ะกะขะะขะะกะขะะะ:
  ะัะตะณะพ ะทะฐะบะฐะทะพะฒ: 150
  ะะบัะธะฒะฝัั ะบะพัะทะธะฝ: 45
  ะัะตะณะพ ัะพะฒะฐัะพะฒ ะฒ ะทะฐะบะฐะทะฐั: 320
  ะขะพะฒะฐัะพะฒ ะฒ ะบะพัะทะธะฝะฐั: 67

๐ท๏ธ ะกะขะะขะะกะขะะะ ะะ ะกะขะะขะฃะกะะ:
  ะะพัะทะธะฝะฐ: 45 ะทะฐะบะฐะทะพะฒ (ััะผะผะฐ: 0.00 โฝ)
  ะะถะธะดะฐะตั ะพะฟะปะฐัั: 25 ะทะฐะบะฐะทะพะฒ (ััะผะผะฐ: 45000.00 โฝ)
  ะะฟะปะฐัะตะฝ: 80 ะทะฐะบะฐะทะพะฒ (ััะผะผะฐ: 120000.00 โฝ)

๐๏ธ ะกะขะะะซะ ะะะะะะะซ (ััะฐััะต 30 ะดะฝะตะน):
  ะะพะปะธัะตััะฒะพ: 12
  ะขะพะฒะฐัะพะฒ ะฒ ะฝะธั: 23
  ะกัะตะดะฝะธะน ะฒะพะทัะฐัั: 45 ะดะฝะตะน
```

### 2. ะัะธััะบะฐ ััะฐััั ะบะพัะทะธะฝ
```bash
python manage.py cleanup_old_carts
```

**ะะฟัะธะธ:**
- `--days 30` - ะบะพะปะธัะตััะฒะพ ะดะฝะตะน, ะฟะพัะปะต ะบะพัะพััั ะบะพัะทะธะฝั ััะธัะฐัััั ััะฐััะผะธ
- `--dry-run` - ะฟะพะบะฐะทะฐัั ััะพ ะฑัะดะตั ัะดะฐะปะตะฝะพ, ะฑะตะท ัะฐะบัะธัะตัะบะพะณะพ ัะดะฐะปะตะฝะธั
- `--force` - ะฟัะธะฝัะดะธัะตะปัะฝะพ ัะดะฐะปะธัั ะฑะตะท ะฟะพะดัะฒะตัะถะดะตะฝะธั
- `--notify` - ะพัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธะต ะฐะดะผะธะฝะธัััะฐัะพัั ะฟะพัะปะต ะพัะธััะบะธ

**ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั:**

```bash
# ะัะตะดะฒะฐัะธัะตะปัะฝัะน ะฟัะพัะผะพัั (ะฑะตะท ัะดะฐะปะตะฝะธั)
python manage.py cleanup_old_carts --dry-run

# ะัะธััะบะฐ ะบะพัะทะธะฝ ััะฐััะต 7 ะดะฝะตะน ั ัะฒะตะดะพะผะปะตะฝะธะตะผ
python manage.py cleanup_old_carts --days 7 --notify

# ะัะธะฝัะดะธัะตะปัะฝะฐั ะพัะธััะบะฐ ะบะพัะทะธะฝ ััะฐััะต 30 ะดะฝะตะน ั ัะฒะตะดะพะผะปะตะฝะธะตะผ
python manage.py cleanup_old_carts --days 30 --force --notify
```

### 3. ะัะฟัะฐะฒะบะฐ ัะฒะตะดะพะผะปะตะฝะธะน ะพ ะฝะตะพะฑัะพะดะธะผะพััะธ ะพัะธััะบะธ
```bash
python manage.py notify_cleanup
```

**ะะฟัะธะธ:**
- `--force` - ะฟัะธะฝัะดะธัะตะปัะฝะพ ะพัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธะต ะดะฐะถะต ะตัะปะธ ััะฐััั ะบะพัะทะธะฝ ะฝะตั
- `--threshold 30` - ะฟะพัะพะณะพะฒะพะต ะบะพะปะธัะตััะฒะพ ะดะฝะตะน ะดะปั ัะฒะตะดะพะผะปะตะฝะธั (ะฟะพ ัะผะพะปัะฐะฝะธั: 30)

**ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั:**

```bash
# ะัะพะฒะตัะธัั ะธ ะพัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธะต ะตัะปะธ ะฝัะถะฝะพ
python manage.py notify_cleanup

# ะัะธะฝัะดะธัะตะปัะฝะพ ะพัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธะต
python manage.py notify_cleanup --force

# ะัะพะฒะตัะธัั ะบะพัะทะธะฝั ััะฐััะต 7 ะดะฝะตะน
python manage.py notify_cleanup --threshold 7
```

## ๐ง ะกะธััะตะผะฐ ัะฒะตะดะพะผะปะตะฝะธะน

### ะขะธะฟั ัะฒะตะดะพะผะปะตะฝะธะน:

#### 1. ะฃะฒะตะดะพะผะปะตะฝะธะต ะพ ะฝะตะพะฑัะพะดะธะผะพััะธ ะพัะธััะบะธ
- **ะขัะธะณะณะตั:** ะะฐะนะดะตะฝั ััะฐััะต ะบะพัะทะธะฝั (>30 ะดะฝะตะน)
- **ะฃัะพะฒะฝะธ ะบัะธัะธัะฝะพััะธ:**
  - ๐ด **ะะะะขะะงะะกะะะ** (>100 ััะฐััั ะบะพัะทะธะฝ)
  - ๐ **ะะซะกะะะะ** (50-100 ััะฐััั ะบะพัะทะธะฝ)
  - ๐ก **ะกะะะะะะ** (<50 ััะฐััั ะบะพัะทะธะฝ)

#### 2. ะฃะฒะตะดะพะผะปะตะฝะธะต ะพ ัะตะทัะปััะฐัะฐั ะพัะธััะบะธ
- **ะขัะธะณะณะตั:** ะะพัะปะต ััะฟะตัะฝะพะน ะพัะธััะบะธ ะบะพัะทะธะฝ
- **ะกะพะดะตัะถะธั:** ะกัะฐัะธััะธะบั ัะดะฐะปะตะฝะฝัั ะบะพัะทะธะฝ ะธ ัะตะบััะตะต ัะพััะพัะฝะธะต

### ะัะธะผะตัั ัะฒะตะดะพะผะปะตะฝะธะน:

#### ะฃะฒะตะดะพะผะปะตะฝะธะต ะพ ะฝะตะพะฑัะพะดะธะผะพััะธ ะพัะธััะบะธ:
```
ะขะตะผะฐ: โ๏ธ ะขัะตะฑัะตััั ะพัะธััะบะฐ ะบะพัะทะธะฝ - ะะะะขะะงะะกะะะ ััะพะฒะตะฝั

๐ ะกัะฐัะธััะธะบะฐ ะบะพัะทะธะฝ:
- ะัะตะณะพ ะบะพัะทะธะฝ: 150
- ะขะพะฒะฐัะพะฒ ะฒ ะบะพัะทะธะฝะฐั: 320
- ะกัะฐััั ะบะพัะทะธะฝ (>7 ะดะฝะตะน): 45
- ะกัะฐััั ะบะพัะทะธะฝ (>30 ะดะฝะตะน): 120

๐ง ะะตะบะพะผะตะฝะดัะตะผัะต ะดะตะนััะฒะธั:
1. ะะฐะฟัััะธัั ะพัะธััะบั: python manage.py cleanup_old_carts --days 30 --force
2. ะัะพะฒะตัะธัั ััะฐัะธััะธะบั: python manage.py cart_stats --days 30
3. ะะฐัััะพะธัั ะฐะฒัะพะผะฐัะธัะตัะบัั ะพัะธััะบั
```

#### ะฃะฒะตะดะพะผะปะตะฝะธะต ะพ ัะตะทัะปััะฐัะฐั ะพัะธััะบะธ:
```
ะขะตะผะฐ: โ ะัะธััะบะฐ ะบะพัะทะธะฝ ะทะฐะฒะตััะตะฝะฐ - ัะดะฐะปะตะฝะพ 120 ะบะพัะทะธะฝ

๐ ะะตะทัะปััะฐัั ะพัะธััะบะธ:
- ะฃะดะฐะปะตะฝะพ ะบะพัะทะธะฝ: 120
- ะฃะดะฐะปะตะฝะพ ัะพะฒะฐัะพะฒ: 250
- ะะพะทัะฐัั ะบะพัะทะธะฝ: ััะฐััะต 30 ะดะฝะตะน

๐ ะขะตะบััะฐั ััะฐัะธััะธะบะฐ:
- ะัะตะณะพ ะบะพัะทะธะฝ: 30
- ะขะพะฒะฐัะพะฒ ะฒ ะบะพัะทะธะฝะฐั: 70
- ะกัะฐััั ะบะพัะทะธะฝ (>30 ะดะฝะตะน): 0
```
